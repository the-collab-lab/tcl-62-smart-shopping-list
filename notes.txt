import React, { useState } from 'react';
import { ListItem } from '../components';

export function List({ data }) {
  const [searchField, setSearchField] = useState('');
  const [searchMatch, setSearchMatch] = useState(data);

  const handleUserSearch = (event) => {
    const searchTerm = event.target.value;
    setSearchField(searchTerm);

    if (searchTerm.trim() === '') {
      setSearchMatch(data);
    } else {
      const searchRegEx = new RegExp(searchTerm, 'i');
      const filteredData = data.filter((item) => searchRegEx.test(item.name)); // Adjust 'item.name' to your data structure

      setSearchMatch(filteredData);
    }
  };

  const handleUserClear = () => {
    setSearchField('');
    setSearchMatch(data);
  };

  return (
    <>
      <p>
        Hello from the <code>/list</code> page!
      </p>

      <input
        name="searchInput"
        type="text"
        value={searchField}
        onChange={handleUserSearch}
      />

      <button onClick={handleUserClear}>Clear Search Field</button>
      <ul>
        {searchMatch.map((item, index) => (
          <ListItem key={index} name={item.name} />
        ))}
      </ul>
    </>
  );
}
